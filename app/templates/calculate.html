{% extends "base.html" %}

{% block title %}Calculate{% endblock %}

{% block content %}
<h1>Calculate Page</h1>
<form id="carbonForm">
    <label for="electricityUsage">Monthly Electricity Usage (kWh):</label>
    <input type="number" id="electricityUsage" required>

    <label for="fuelConsumption">Monthly Fuel Consumption (liters):</label>
    <input type="number" id="fuelConsumption" required>

    <label for="wasteGenerated">Waste Generated (kg per month):</label>
    <input type="number" id="wasteGenerated" required>

    <label for="waterUsage">Monthly Water Usage (liters):</label>
    <input type="number" id="waterUsage" required>

    <button type="button" onclick="calculateCarbonFootprint()">Calculate Carbon Footprint</button>
</form>

<div id="result"></div>

<script>
        function calculateCarbonFootprint() {
            //user input values
            const electricityUsage = parseFloat(document.getElementById('electricityUsage').value);
            const fuelConsumption = parseFloat(document.getElementById('fuelConsumption').value);
            const wasteGenerated = parseFloat(document.getElementById('wasteGenerated').value);
            const waterUsage = parseFloat(document.getElementById('waterUsage').value);

            if (isNaN(electricityUsage) || isNaN(fuelConsumption) || isNaN(wasteGenerated) || isNaN(waterUsage)) {
                document.getElementById('result').textContent = 'Please enter valid numerical values for all inputs.';
                return;
            }

            /e/emission factors (kg CO2 per unit)
            const CO2_PER_KWH = 0.527;
            const CO2_PER_LITER_FUEL = 2.31;
            const CO2_PER_KG_WASTE = 0.8;
            const CO2_PER_LITER_WATER = 0.0003;

            //calc emissions for each activity
            const electricityEmissions = electricityUsage * CO2_PER_KWH;
            const fuelEmissions = fuelConsumption * CO2_PER_LITER_FUEL;
            const wasteEmissions = wasteGenerated * CO2_PER_KG_WASTE;
            const waterEmissions = waterUsage * CO2_PER_LITER_WATER;

            //total emissions
            const totalEmissions = electricityEmissions + fuelEmissions + wasteEmissions + waterEmissions;
            //results
            document.getElementById('result').textContent = `Your total monthly carbon footprint is: ${totalEmissions.toFixed(2)} kg CO2 equivalent.`;
        }
    </script>
{% endblock %}

